<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¹³å°ç®¡ç† - é‡‘åç†å·¥ç‰©è”ç½‘å¹³å°</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="brand">
                <div class="brand-logo"></div>
                <div class="brand-text">ç‰©è”ç½‘å¹³å°</div>
            </div>
            <nav class="nav-menu">
                <div class="nav-group-title">è®¾å¤‡ç©ºé—´ç®¡ç†</div>
                <a href="101_åŸºç¡€è®¾å¤‡ç›®å½•ç®¡ç†.html" class="nav-item">
                    <span>ğŸ“š</span> åŸºç¡€ç›®å½•
                </a>
                <a href="101_æ ‡ç­¾ç®¡ç†.html" class="nav-item">
                    <span>ğŸ·ï¸</span> æ ‡ç­¾ç®¡ç†
                </a>
                <a href="101_åœ°å›¾å¹¿åœº.html" class="nav-item">
                    <span>ğŸ—ºï¸</span> åœ°å›¾å¹¿åœº
                </a>
                <a href="101_åœ°å›¾ç®¡ç†.html" class="nav-item">
                    <span>âš™ï¸</span> åœ°å›¾é…ç½®
                </a>

                <div class="nav-group-title">è®¾å¤‡æ²»ç†</div>
                <a href="102_æ²»ç†ä»»åŠ¡.html" class="nav-item">
                    <span>ğŸ“‹</span> æ²»ç†ä»»åŠ¡
                </a>
                <a href="102_æ²»ç†å‚æ•°è®¾ç½®.html" class="nav-item">
                    <span>âš™ï¸</span> å‚æ•°è®¾ç½®
                </a>

                <div class="nav-group-title">ç‰©è”ç½‘è®¾å¤‡ç®¡ç†</div>
                <a href="103_å¹³å°è®¾å¤‡ç®¡ç†.html" class="nav-item active">
                    <span>ğŸ–¥ï¸</span> å¹³å°ç®¡ç†
                </a>
                <a href="103_å¹³å°é€šé“ç®¡ç†.html" class="nav-item">
                    <span>ğŸ“¡</span> é€šé“ç®¡ç†
                </a>
                <a href="103_è®¾å¤‡åˆ†ç»„ç®¡ç†.html" class="nav-item">
                    <span>ğŸ“‚</span> è®¾å¤‡åˆ†ç»„
                </a>

                <div class="nav-group-title">è§†é¢‘æƒé™ç®¡ç†</div>
                <a href="104_ç›´æ¥å…±äº«.html" class="nav-item">
                    <span>ğŸ“±</span> ç›´æ¥å…±äº«
                </a>
                <!-- <span>ğŸ¨</span> åº”ç”¨ç¼–æ’ (Coming Soon) -->
                <a href="104_ä»£ç†å…±äº«.html" class="nav-item">
                    <span>ğŸ”—</span> ä»£ç†å…±äº«
                </a>

                <div class="nav-group-title">æƒé™å®¡æ‰¹ç®¡ç†</div>
                <a href="105_éœ€æ±‚ç™»è®°.html" class="nav-item">
                    <span>ğŸ“</span> éœ€æ±‚ç™»è®°
                </a>
                <a href="105_éœ€æ±‚å®¡æ‰¹.html" class="nav-item">
                    <span>âš–ï¸</span> éœ€æ±‚å®¡æ‰¹
                </a>
                <a href="105_æˆæƒç®¡ç†.html" class="nav-item">
                    <span>ğŸ›‘</span> æˆæƒç®¡ç†
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="main-content">
            <header class="top-bar">
                <h2 class="page-title">å¹³å°ç®¡ç†</h2>
                <div class="user-profile">
                    <span>ç®¡ç†å‘˜</span>
                    <div class="avatar"></div>
                </div>
            </header>

            <div class="content-area">
                <!-- Data Filter -->
                <div class="filter-bar">
                    <div style="flex: 1; min-width: 180px;">
                        <label class="input-label">å¹³å°ç¼–ç </label>
                        <input type="text" class="glass-input" placeholder="è¯·è¾“å…¥å¹³å°ç¼–ç ">
                    </div>
                    <div style="flex: 1; min-width: 180px;">
                        <label class="input-label">å¹³å°åç§°</label>
                        <input type="text" class="glass-input" placeholder="è¯·è¾“å…¥å¹³å°åç§°">
                    </div>
                    <div style="flex: 1; min-width: 160px;">
                        <label class="input-label">å¹³å°ç±»å‹</label>
                        <select class="glass-input">
                            <option value="">å…¨éƒ¨ç±»å‹</option>
                            <option value="gb28181">å›½æ ‡GB28181</option>
                            <option value="dahua_icc">å¤§åICC</option>
                            <option value="hik_isc">æµ·åº·ISC</option>
                        </select>
                    </div>
                    <div style="display: flex; align-items: flex-end; gap: 8px;">
                        <button class="btn btn-primary" onclick="searchData()">æŸ¥è¯¢</button>
                        <button class="btn btn-secondary">é‡ç½®</button>
                    </div>
                    <div style="flex: 1; display: flex; justify-content: flex-end; align-items: flex-end;">
                        <button class="btn btn-primary" onclick="openPlatformModal()">+ æ–°å¢å¹³å°</button>
                    </div>
                </div>

                <!-- Platform List -->
                <div class="glass-panel">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>å¹³å°åç§°</th>
                                <th>å¹³å°æ ‡è¯†</th>
                                <th>å¹³å°ç±»å‹</th>
                                <th>å¹³å°IP/ç«¯å£</th>
                                <th>è®¤è¯çŠ¶æ€</th>
                                <th>æ¥å…¥çŠ¶æ€</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>å¤§åICCè§†é¢‘äº‘</td>
                                <td>33010000002100000001</td>
                                <td>å¤§åICC</td>
                                <td>192.168.1.100 : 8080</td>
                                <td><span class="status-tag status-success">åœ¨çº¿</span></td>
                                <td>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked onchange="toggleStatus(this)">
                                        <span class="slider"></span>
                                    </label>
                                </td>
                                <td>
                                    <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;"
                                        onclick="openPlatformModal(true)">ç¼–è¾‘</button>
                                    <button class="btn btn-secondary"
                                        style="padding: 4px 8px; font-size: 12px; color: var(--danger); border-color: var(--danger);"
                                        onclick="deletePlatform()">åˆ é™¤</button>
                                </td>
                            </tr>
                            <tr>
                                <td>æµ·åº·ISCå®‰é˜²å¹³å°</td>
                                <td>33010000002100000002</td>
                                <td>æµ·åº·ISC</td>
                                <td>192.168.1.200 : 80</td>
                                <td><span class="status-tag status-danger">è®¤è¯å¤±è´¥</span></td>
                                <td>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked onchange="toggleStatus(this)">
                                        <span class="slider"></span>
                                    </label>
                                </td>
                                <td>
                                    <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;"
                                        onclick="openPlatformModal(true)">ç¼–è¾‘</button>
                                    <button class="btn btn-secondary"
                                        style="padding: 4px 8px; font-size: 12px; color: var(--danger); border-color: var(--danger);"
                                        onclick="deletePlatform()">åˆ é™¤</button>
                                </td>
                            </tr>
                            <tr>
                                <td>è€æ—§å›½æ ‡NVRç½‘å…³</td>
                                <td>33070200002000000001</td>
                                <td>å›½æ ‡GB28181</td>
                                <td>10.10.10.5 : 5060</td>
                                <td><span class="status-tag status-warning">æœªæ¿€æ´»</span></td>
                                <td>
                                    <label class="toggle-switch">
                                        <input type="checkbox" onchange="toggleStatus(this)">
                                        <span class="slider"></span>
                                    </label>
                                </td>
                                <td>
                                    <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;"
                                        onclick="openPlatformModal(true)">ç¼–è¾‘</button>
                                    <button class="btn btn-secondary"
                                        style="padding: 4px 8px; font-size: 12px; color: var(--danger); border-color: var(--danger);"
                                        onclick="deletePlatform()">åˆ é™¤</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Platform Modal -->
    <div class="modal-overlay" id="platformModal">
        <div class="modal-content" style="width: 700px;">
            <div class="modal-header">
                <h3 class="modal-title" id="platformModalTitle">æ–°å¢æ¥å…¥å¹³å°</h3>
                <button class="modal-close" onclick="closePlatformModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="form-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="input-group">
                        <label class="input-label"><span style="color:red">*</span> å¹³å°åç§°</label>
                        <input type="text" class="glass-input" placeholder="è¯·è¾“å…¥å¹³å°åç§°">
                    </div>
                    <div class="input-group">
                        <label class="input-label"><span style="color:red">*</span> å¹³å°ç±»å‹</label>
                        <select class="glass-input">
                            <option value="gb28181">å›½æ ‡GB28181</option>
                            <option value="dahua_icc">å¤§åICC</option>
                            <option value="hik_isc">æµ·åº·ISC</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label class="input-label"><span style="color:red">*</span> å¹³å°IP</label>
                        <input type="text" class="glass-input" placeholder="IPv4/IPv6">
                    </div>
                    <div class="input-group">
                        <label class="input-label"><span style="color:red">*</span> ç«¯å£</label>
                        <input type="number" class="glass-input" placeholder="æœåŠ¡/ä¿¡ä»¤ç«¯å£">
                    </div>

                    <div class="input-group">
                        <label class="input-label"><span style="color:red">*</span> å¹³å°æ ‡è¯† (å›½æ ‡ç )</label>
                        <input type="text" class="glass-input" placeholder="20ä½ç¼–ç ">
                    </div>
                    <div class="input-group">
                        <label class="input-label"><span style="color:red">*</span> è®¤è¯å¯†ç </label>
                        <input type="password" class="glass-input" value="123456">
                    </div>

                    <div class="input-group">
                        <label class="input-label">HTTPç«¯å£</label>
                        <input type="number" class="glass-input">
                    </div>
                    <div class="input-group">
                        <label class="input-label">HTTPSç«¯å£</label>
                        <input type="number" class="glass-input">
                    </div>

                    <div class="input-group" style="grid-column: span 2;">
                        <label class="input-label">å…¶ä»–é€‰é¡¹</label>
                        <div style="display: flex; gap: 20px;">
                            <label style="display: flex; align-items: center; gap: 6px;">
                                <input type="checkbox" checked> å¼€å¯HTTPS
                            </label>
                            <label style="display: flex; align-items: center; gap: 6px;">
                                <input type="checkbox" checked> ç›®å½•è®¢é˜…/è‡ªåŠ¨åŒæ­¥
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closePlatformModal()">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="savePlatform()">ä¿å­˜</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Fallback or Override for local file:// execution where module scripts might fail
        // and to provide missing showConfirm functionality.

        // 1. Ensure showToast exists (if script.js failed to load)
        if (typeof showToast !== 'function') {
            window.showToast = function (message, type = 'success') {
                const toast = document.createElement('div');
                toast.className = `glass-panel toast toast-${type}`;
                toast.style.cssText = `
                    position: fixed; top: 20px; right: 20px; 
                    padding: 12px 24px; border-radius: 8px;
                    background: rgba(15, 23, 42, 0.9);
                    border: 1px solid var(--glass-border);
                    color: white; font-size: 14px;
                    transform: translateY(-20px); opacity: 0;
                    transition: all 0.3s ease; z-index: 2000;
                    display: flex; align-items: center; gap: 8px;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                `;
                let icon = 'âœ“';
                if (type === 'error') icon = 'âœ•';
                if (type === 'warning') icon = '!';
                toast.innerHTML = `<span style="color: var(--${type}); font-weight:bold;">${icon}</span> ${message}`;
                document.body.appendChild(toast);
                setTimeout(() => {
                    toast.style.transform = 'translateY(0)';
                    toast.style.opacity = '1';
                }, 10);
                setTimeout(() => {
                    toast.style.transform = 'translateY(-20px)';
                    toast.style.opacity = '0';
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            };
        }

        // 2. Implement showConfirm (Missing in script.js completely based on file read)
        if (typeof showConfirm !== 'function') {
            window.showConfirm = function (message, onConfirm) {
                // Use a simple native confirm for robustness in local file mode
                // Or create a custom modal if we want to match style. 
                // Let's build a custom one to match the '08_device_group' style described in testing.

                // Remove existing confirm modal if any
                const existing = document.getElementById('custom-confirm-modal');
                if (existing) existing.remove();

                const modalHtml = `
                <div class="modal-overlay active" id="custom-confirm-modal" style="z-index: 3000;">
                    <div class="modal-content" style="width: 400px;">
                        <div class="modal-header">
                            <h3 class="modal-title">ç¡®è®¤æ“ä½œ</h3>
                            <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">Ã—</button>
                        </div>
                        <div class="modal-body">
                            <p style="color: var(--text-secondary); margin: 20px 0;">${message}</p>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" onclick="this.closest('.modal-overlay').remove()">å–æ¶ˆ</button>
                            <button class="btn btn-primary" id="confirm-btn-action" style="background: var(--danger); border-color: var(--danger);">ç¡®è®¤åˆ é™¤</button>
                        </div>
                    </div>
                </div>
                `;

                document.body.insertAdjacentHTML('beforeend', modalHtml);

                document.getElementById('confirm-btn-action').onclick = function () {
                    document.getElementById('custom-confirm-modal').remove();
                    if (onConfirm) onConfirm();
                };
            };
        }

        function searchData() {
            showToast('æ•°æ®å·²åˆ·æ–°');
        }

        function openPlatformModal(isEdit = false) {
            document.getElementById('platformModalTitle').innerText = isEdit ? 'ç¼–è¾‘æ¥å…¥å¹³å°' : 'æ–°å¢æ¥å…¥å¹³å°';
            document.getElementById('platformModal').classList.add('active');
        }

        function closePlatformModal() {
            document.getElementById('platformModal').classList.remove('active');
        }

        function savePlatform() {
            closePlatformModal();
            showToast('å¹³å°ä¿¡æ¯ä¿å­˜æˆåŠŸ', 'success');
        }

        function toggleStatus(checkbox) {
            const status = checkbox.checked ? 'å¯ç”¨' : 'ç¦ç”¨';
            showToast('å¹³å°å·²' + status);
        }

        function deletePlatform() {
            showConfirm('ç¡®å®šè¦åˆ é™¤è¯¥å¹³å°å—ï¼Ÿåˆ é™¤åå°†æ— æ³•æ¢å¤ã€‚', () => {
                showToast('å¹³å°å·²åˆ é™¤', 'success');
            });
        }
    </script>
    <style>
        /* Simple Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 36px;
            height: 20px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 20px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked+.slider {
            background-color: var(--success);
        }

        input:checked+.slider:before {
            transform: translateX(16px);
        }
    </style>
</body>

</html>