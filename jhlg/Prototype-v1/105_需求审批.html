<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éœ€æ±‚å®¡æ‰¹ - é‡‘åç†å·¥ç‰©è”ç½‘å¹³å°</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="brand">
                <div class="brand-logo"></div>
                <div class="brand-text">ç‰©è”ç½‘å¹³å°</div>
            </div>
            <nav class="nav-menu">
                <div class="nav-group-title">è®¾å¤‡ç©ºé—´ç®¡ç†</div>
                <a href="101_åŸºç¡€è®¾å¤‡ç›®å½•ç®¡ç†.html" class="nav-item">
                    <span>ğŸ“š</span> åŸºç¡€ç›®å½•
                </a>
                <a href="101_æ ‡ç­¾ç®¡ç†.html" class="nav-item">
                    <span>ğŸ·ï¸</span> æ ‡ç­¾ç®¡ç†
                </a>
                <a href="101_åœ°å›¾å¹¿åœº.html" class="nav-item">
                    <span>ğŸ—ºï¸</span> åœ°å›¾å¹¿åœº
                </a>
                <a href="101_åœ°å›¾ç®¡ç†.html" class="nav-item">
                    <span>âš™ï¸</span> åœ°å›¾é…ç½®
                </a>

                <div class="nav-group-title">è®¾å¤‡æ²»ç†</div>
                <a href="102_æ²»ç†ä»»åŠ¡.html" class="nav-item">
                    <span>ğŸ“‹</span> æ²»ç†ä»»åŠ¡
                </a>
                <a href="102_æ²»ç†å‚æ•°è®¾ç½®.html" class="nav-item">
                    <span>âš™ï¸</span> å‚æ•°è®¾ç½®
                </a>

                <div class="nav-group-title">ç‰©è”ç½‘è®¾å¤‡ç®¡ç†</div>
                <a href="103_å¹³å°è®¾å¤‡ç®¡ç†.html" class="nav-item">
                    <span>ğŸ–¥ï¸</span> å¹³å°ç®¡ç†
                </a>
                <a href="103_å¹³å°é€šé“ç®¡ç†.html" class="nav-item">
                    <span>ğŸ“¡</span> é€šé“ç®¡ç†
                </a>
                <a href="103_è®¾å¤‡åˆ†ç»„ç®¡ç†.html" class="nav-item">
                    <span>ğŸ“‚</span> è®¾å¤‡åˆ†ç»„
                </a>

                <div class="nav-group-title">è§†é¢‘æƒé™ç®¡ç†</div>
                <a href="104_ç›´æ¥å…±äº«.html" class="nav-item">
                    <span>ğŸ“±</span> ç›´æ¥å…±äº«
                </a>
                <!-- <span>ğŸ¨</span> åº”ç”¨ç¼–æ’ (Coming Soon) -->
                <a href="104_ä»£ç†å…±äº«.html" class="nav-item">
                    <span>ğŸ”—</span> ä»£ç†å…±äº«
                </a>

                <div class="nav-group-title">æƒé™å®¡æ‰¹ç®¡ç†</div>
                <a href="105_éœ€æ±‚ç™»è®°.html" class="nav-item">
                    <span>ğŸ“</span> éœ€æ±‚ç™»è®°
                </a>
                <a href="105_éœ€æ±‚å®¡æ‰¹.html" class="nav-item active">
                    <span>âš–ï¸</span> éœ€æ±‚å®¡æ‰¹
                </a>
                <a href="105_æˆæƒç®¡ç†.html" class="nav-item">
                    <span>ğŸ›‘</span> æˆæƒç®¡ç†
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="main-content">
            <header class="top-bar">
                <h2 class="page-title">éœ€æ±‚å®¡æ‰¹</h2>
                <div class="user-profile">
                    <span>ç®¡ç†å‘˜</span>
                    <div class="avatar"></div>
                </div>
            </header>

            <div class="content-area">
                <!-- Tabs -->
                <div class="tabs tab-container">
                    <div class="tab-item tab-trigger active" data-tab-target="tab-pending">å¾…åŠä»»åŠ¡ <span
                            class="badge">1</span></div>
                    <div class="tab-item tab-trigger" data-tab-target="tab-processed">å·²åŠä»»åŠ¡</div>
                </div>

                <!-- Filter -->
                <div class="filter-bar">
                    <div style="flex: 1; min-width: 200px;">
                        <label class="input-label">ç”³è¯·äºº/åº”ç”¨</label>
                        <input type="text" class="glass-input" placeholder="è¯·è¾“å…¥å…³é”®å­—">
                    </div>
                    <div style="display: flex; align-items: flex-end; gap: 8px;">
                        <button class="btn btn-primary" onclick="searchData()">æŸ¥è¯¢</button>
                    </div>
                </div>

                <!-- Approval List (Pending) -->
                <div id="tab-pending" class="tab-content active glass-panel">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ç”³è¯·å•å·</th>
                                <th>ç”³è¯·äºº</th>
                                <th>å…³è”åº”ç”¨</th>
                                <th>æ•°æ®èŒƒå›´</th>
                                <th>ç”³è¯·æ—¶é—´</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>REQ202510250001</td>
                                <td>å¼ ä¸‰ (å¼€å‘è€…)</td>
                                <td>æ™ºæ…§å®‰é˜²åº”ç”¨</td>
                                <td>è®¾å¤‡ (2ä¸ª)</td>
                                <td>2025-10-25 10:30</td>
                                <td>
                                    <button class="btn btn-primary" style="padding: 4px 8px; font-size: 12px;"
                                        onclick="openApprovalModal()">å®¡æ‰¹</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Approval List (Processed) -->
                <div id="tab-processed" class="tab-content glass-panel">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ç”³è¯·å•å·</th>
                                <th>ç”³è¯·äºº</th>
                                <th>å…³è”åº”ç”¨</th>
                                <th>æ•°æ®èŒƒå›´</th>
                                <th>å®¡æ‰¹ç»“æœ</th>
                                <th>å®¡æ‰¹æ—¶é—´</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>REQ202510200005</td>
                                <td>æå›› (æ¶ˆé˜²ç®¡ç†å‘˜)</td>
                                <td>æ¶ˆé˜²é€šé“ç›‘æµ‹</td>
                                <td>è®¾å¤‡ (5ä¸ª)</td>
                                <td><span class="status-tag status-success">å·²é€šè¿‡</span></td>
                                <td>2025-10-20 14:00</td>
                                <td>
                                    <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;"
                                        onclick="openProcessedDetailModal()">æŸ¥çœ‹</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Approval Modal -->
    <div class="modal-overlay" id="approvalModal">
        <div class="modal-content" style="width: 1000px;">
            <div class="modal-header">
                <h3 class="modal-title">å®¡æ‰¹å•æ®: REQ202510250001</h3>
                <button class="modal-close" onclick="closeApprovalModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <div style="display: flex; gap: 20px;">
                    <!-- Left: Request Info (Read Only) -->
                    <div style="flex: 1; border-right: 1px solid #eee; padding-right: 20px;">
                        <h4 style="margin-top: 0; color: #333;">ç”³è¯·ä¿¡æ¯</h4>
                        <div style="margin-bottom: 12px;">
                            <label style="color: #666; font-size: 12px; display: block;">å…³è”åº”ç”¨</label>
                            <div>æ™ºæ…§å®‰é˜²åº”ç”¨</div>
                        </div>
                        <div style="margin-bottom: 12px;">
                            <label style="color: #666; font-size: 12px; display: block;">ç”³è¯·äºº</label>
                            <div>å¼ ä¸‰ (å¼€å‘è€…)</div>
                        </div>
                        <div style="margin-bottom: 12px;">
                            <label style="color: #666; font-size: 12px; display: block;">ç”³è¯·ç†ç”±</label>
                            <div style="background: #f8fafc; padding: 8px; border-radius: 4px; font-size: 13px;">
                                å› æ ¡å›­å‘¨ç•Œå®‰é˜²ç›‘æ§é¡¹ç›®éœ€è¦ï¼Œéœ€è·å–ä¸œé—¨åŠå¤§å…æ‘„åƒå¤´çš„é¢„è§ˆåŠå›æ”¾æƒé™ã€‚
                            </div>
                        </div>
                        <div style="margin-bottom: 12px;">
                            <label style="color: #666; font-size: 12px; display: block;">è¯·æ±‚æ•°æ®èŒƒå›´</label>
                            <ul style="padding-left: 20px; font-size: 13px; margin: 4px 0;">
                                <li>ğŸ“¹ æ•™å­¦æ¥¼A-å¤§å…å…¨æ™¯</li>
                                <li>ğŸ“¹ æ•™å­¦æ¥¼A-ä¸œé—¨çƒæœº</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Right: Decision -->
                    <div style="flex: 1;">
                        <h4 style="margin-top: 0; color: #333;">å®¡æ‰¹å†³ç­–</h4>

                        <!-- Approval Form -->
                        <div id="decisionForm">
                            <div class="input-group">
                                <label class="input-label">å®¡æ ¸ç»“æœ</label>
                                <div style="display: flex; gap: 16px;">
                                    <label><input type="radio" name="result" checked
                                            onchange="toggleRejectReason(false)"> é€šè¿‡</label>
                                    <label><input type="radio" name="result" onchange="toggleRejectReason(true)">
                                        é©³å›</label>
                                </div>
                            </div>

                            <div id="approveOptions">
                                <div class="input-group">
                                    <label class="input-label">æˆæƒç­–ç•¥</label>
                                    <div style="font-size: 12px; color: #666; margin-bottom: 8px;">æ­¤æ¬¡ç”³è¯·ä¸ºæŒ‰è®¾å¤‡ç”³è¯·ï¼Œé»˜è®¤ä¸ºå¿«ç…§æˆæƒã€‚
                                    </div>
                                    <div style="display: flex; gap: 16px;">
                                        <label><input type="radio" name="strategy" value="snapshot" checked> å¿«ç…§æˆæƒ
                                            (å›ºå®šåˆ—è¡¨)</label>
                                        <label><input type="radio" name="strategy" value="dynamic"> åŠ¨æ€æˆæƒ
                                            (è‡ªåŠ¨ç»§æ‰¿)</label>
                                    </div>
                                </div>

                                <div class="input-group">
                                    <label class="input-label">æƒé™å¾®è°ƒ</label>
                                    <div style="display: flex; gap: 12px; height: 350px;">
                                        <!-- Left Panel: Inline Available -->
                                        <div
                                            style="flex: 1; background: #fff; border: 1px solid #ddd; border-radius: 6px; display: flex; flex-direction: column;">
                                            <div
                                                style="padding: 10px; border-bottom: 1px solid #eee; background: #fafafa; border-radius: 6px 6px 0 0;">
                                                <div style="font-weight: 500; font-size: 14px; margin-bottom: 8px;">å¯é€‰è®¾å¤‡
                                                    (å…¨éƒ¨)</div>
                                                <input type="text" class="glass-input" id="inlineSearchInput"
                                                    placeholder="ğŸ” æœç´¢è®¾å¤‡..."
                                                    style="width: 100%; font-size: 12px; padding: 6px 8px;"
                                                    oninput="filterInlineDevices()">
                                                <div style="display: flex; gap: 6px; margin-top: 8px;">
                                                    <select class="glass-input" id="inlineAreaFilter"
                                                        style="flex: 1; font-size: 11px; padding: 4px;"
                                                        onchange="filterInlineDevices()">
                                                        <option value="">åŒºåŸŸ: å…¨éƒ¨</option>
                                                        <option value="æ•™å­¦æ¥¼">æ•™å­¦æ¥¼</option>
                                                        <option value="å›¾ä¹¦é¦†">å›¾ä¹¦é¦†</option>
                                                        <option value="è¡Œæ”¿æ¥¼">è¡Œæ”¿æ¥¼</option>
                                                        <option value="å®¿èˆæ¥¼">å®¿èˆæ¥¼</option>
                                                    </select>
                                                    <select class="glass-input" id="inlineStatusFilter"
                                                        style="flex: 1; font-size: 11px; padding: 4px;"
                                                        onchange="filterInlineDevices()">
                                                        <option value="">çŠ¶æ€: å…¨éƒ¨</option>
                                                        <option value="online">åœ¨çº¿</option>
                                                        <option value="offline">ç¦»çº¿</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div
                                                style="padding: 6px 10px; border-bottom: 1px solid #f0f0f0; background: #fafafa;">
                                                <label style="font-size: 12px; color: #666;"><input type="checkbox"
                                                        onclick="toggleSelectAllInline(this)"> å…¨é€‰å½“å‰é¡µ</label>
                                            </div>
                                            <div id="inlineAvailableList"
                                                style="flex: 1; overflow-y: auto; padding: 4px 0;">
                                                <!-- Populated by JS -->
                                            </div>
                                        </div>

                                        <!-- Right Panel: Inline Authorized -->
                                        <div
                                            style="flex: 1; background: #fff; border: 1px solid #ddd; border-radius: 6px; display: flex; flex-direction: column;">
                                            <div
                                                style="padding: 10px; border-bottom: 1px solid #eee; background: #e6f7ff; border-radius: 6px 6px 0 0; display: flex; justify-content: space-between; align-items: center;">
                                                <span style="font-size: 14px; font-weight: 500;">æˆæƒè®¾å¤‡ (<span
                                                        id="inlineAuthorizedCount">0</span>)</span>
                                                <button type="button" class="btn btn-secondary"
                                                    style="font-size: 11px; padding: 3px 10px;"
                                                    onclick="clearAllAuthorized()">æ¸…ç©º</button>
                                            </div>
                                            <div id="inlineAuthorizedList"
                                                style="flex: 1; overflow-y: auto; padding: 4px 0;">
                                                <!-- Populated by JS -->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="input-group">
                                    <label class="input-label">æœ‰æ•ˆæœŸè‡³</label>
                                    <input type="date" class="glass-input" value="2026-10-25">
                                </div>
                            </div>

                            <div id="rejectOptions" style="display: none;">
                                <div class="input-group">
                                    <label class="input-label"><span style="color:red">*</span> é©³å›åŸå› </label>
                                    <textarea class="glass-input" rows="4" placeholder="è¯·è¾“å…¥é©³å›åŸå› ..."></textarea>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeApprovalModal()">å–æ¶ˆ</button>
                    <button class="btn btn-primary" onclick="submitDecision()">ç¡®è®¤æäº¤</button>
                </div>
            </div>
        </div>

        <!-- Processed Detail Modal (Read Only) -->
        <div class="modal-overlay" id="processedDetailModal">
            <div class="modal-content" style="width: 800px;">
                <div class="modal-header">
                    <h3 class="modal-title">å®¡æ‰¹è¯¦æƒ…: REQ202510200005</h3>
                    <button class="modal-close" onclick="closeProcessedDetailModal()">Ã—</button>
                </div>
                <div class="modal-body">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                        <div>
                            <h4 style="margin-top: 0;">ç”³è¯·ä¿¡æ¯</h4>
                            <div style="margin-bottom: 12px;">
                                <label class="input-label">ç”³è¯·äºº</label>
                                <div>æå›› (æ¶ˆé˜²ç®¡ç†å‘˜)</div>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <label class="input-label">å…³è”åº”ç”¨</label>
                                <div>æ¶ˆé˜²é€šé“ç›‘æµ‹</div>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <label class="input-label">ç”³è¯·ç†ç”±</label>
                                <div style="background: #f8fafc; padding: 8px; border-radius: 4px; font-size: 13px;">
                                    éœ€æ¥å…¥æ¶ˆé˜²é€šé“æ‘„åƒå¤´è¿›è¡Œè¿åœæ£€æµ‹ç®—æ³•åˆ†æã€‚
                                </div>
                            </div>
                        </div>
                        <div>
                            <h4 style="margin-top: 0;">å®¡æ‰¹ç»“æœ</h4>
                            <div style="margin-bottom: 12px;">
                                <label class="input-label">å®¡æ ¸çŠ¶æ€</label>
                                <span class="status-tag status-success">å·²é€šè¿‡</span>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <label class="input-label">å®¡æ‰¹äºº</label>
                                <div>ç‹ç®¡ç†å‘˜</div>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <label class="input-label">å®¡æ‰¹æ—¶é—´</label>
                                <div>2025-10-20 14:00</div>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <label class="input-label">æœ€ç»ˆæˆæƒèŒƒå›´</label>
                                <ul style="padding-left: 20px; font-size: 13px; color: #333;">
                                    <li>ğŸ“¹ æ¶ˆé˜²é€šé“-ä¸œåŒº01</li>
                                    <li>ğŸ“¹ æ¶ˆé˜²é€šé“-ä¸œåŒº02</li>
                                    <li>ğŸ“¹ æ¶ˆé˜²é€šé“-è¥¿åŒº01</li>
                                    <li>ğŸ“¹ æ¶ˆé˜²é€šé“-åŒ—é—¨å…¨æ™¯</li>
                                    <li>ğŸ“¹ æ¶ˆé˜²é€šé“-åœ°åº“å…¥å£</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" onclick="closeProcessedDetailModal()">å…³é—­</button>
                </div>
            </div>
        </div>


        <script src="script.js"></script>
        <script>
            // Data for device selector
            const allDevices = [
                { name: "æ•™å­¦æ¥¼A-å¤§å…å…¨æ™¯", area: "æ•™å­¦æ¥¼", status: "online" },
                { name: "æ•™å­¦æ¥¼A-ä¸œé—¨çƒæœº", area: "æ•™å­¦æ¥¼", status: "online" },
                { name: "æ•™å­¦æ¥¼A-1Fèµ°å»Š", area: "æ•™å­¦æ¥¼", status: "online" },
                { name: "å›¾ä¹¦é¦†-æ­£é—¨", area: "å›¾ä¹¦é¦†", status: "offline" },
                { name: "å›¾ä¹¦é¦†-é˜…è§ˆå®¤", area: "å›¾ä¹¦é¦†", status: "online" },
                { name: "è¡Œæ”¿æ¥¼-å¤§å…", area: "è¡Œæ”¿æ¥¼", status: "online" },
                { name: "è¡Œæ”¿æ¥¼-åœè½¦åœº", area: "è¡Œæ”¿æ¥¼", status: "online" },
                { name: "å®¿èˆæ¥¼A-å…¥å£", area: "å®¿èˆæ¥¼", status: "online" }
            ];

            // Currently authorized devices (starts with requested)
            let authorizedDevices = ["æ•™å­¦æ¥¼A-å¤§å…å…¨æ™¯", "æ•™å­¦æ¥¼A-ä¸œé—¨çƒæœº"];

            function searchData() {
                showToast('æ•°æ®å·²åˆ·æ–°');
            }

            function openApprovalModal() {
                document.getElementById('approvalModal').classList.add('active');
                renderInlineSelector();
            }

            function closeApprovalModal() {
                document.getElementById('approvalModal').classList.remove('active');
            }

            function openProcessedDetailModal() {
                document.getElementById('processedDetailModal').classList.add('active');
            }

            function closeProcessedDetailModal() {
                document.getElementById('processedDetailModal').classList.remove('active');
            }

            function toggleRejectReason(isReject) {
                if (isReject) {
                    document.getElementById('approveOptions').style.display = 'none';
                    document.getElementById('rejectOptions').style.display = 'block';
                } else {
                    document.getElementById('approveOptions').style.display = 'block';
                    document.getElementById('rejectOptions').style.display = 'none';
                }
            }

            // Inline Selector Logic
            function renderInlineSelector(filterText = '', areaFilter = '', statusFilter = '') {
                const container = document.getElementById('inlineAvailableList');
                container.innerHTML = '';

                let count = 0;
                allDevices.forEach(device => {
                    // Apply filters
                    if (filterText && !device.name.toLowerCase().includes(filterText.toLowerCase())) return;
                    if (areaFilter && device.area !== areaFilter) return;
                    if (statusFilter && device.status !== statusFilter) return;

                    count++;
                    const isSelected = authorizedDevices.includes(device.name);
                    const statusColor = device.status === 'online' ? '#52c41a' : '#999';
                    const statusText = device.status === 'online' ? 'åœ¨çº¿' : 'ç¦»çº¿';

                    const item = document.createElement('div');
                    item.className = 'available-device-item';
                    item.style.cssText = 'display: flex; align-items: center; padding: 6px 10px; border-bottom: 1px solid #f5f5f5; cursor: pointer;';
                    item.onclick = (e) => {
                        // Prevent triggering if clicking checkbox directly
                        if (e.target.type !== 'checkbox') {
                            const cb = item.querySelector('input[type="checkbox"]');
                            cb.checked = !cb.checked;
                            toggleDeviceAuth(device.name);
                        }
                    };

                    item.innerHTML = `
                    <input type="checkbox" ${isSelected ? 'checked' : ''} style="margin-right: 8px;" onchange="toggleDeviceAuth('${device.name}')">
                    <span style="font-size: 12px; flex: 1;">ğŸ“¹ ${device.name}</span>
                    <span style="font-size: 10px; color: ${statusColor};">â—${statusText}</span>
                `;
                    container.appendChild(item);
                });

                // Render Authorized Right Panel
                renderAuthorizedList();
            }

            function renderAuthorizedList() {
                const container = document.getElementById('inlineAuthorizedList');
                container.innerHTML = '';
                document.getElementById('inlineAuthorizedCount').textContent = authorizedDevices.length;

                if (authorizedDevices.length === 0) {
                    container.innerHTML = '<div style="text-align: center; padding: 40px 10px; color: #999; font-size: 12px;">æš‚æ— æˆæƒè®¾å¤‡</div>';
                    return;
                }

                authorizedDevices.forEach(name => {
                    const item = document.createElement('div');
                    item.style.cssText = 'display: flex; justify-content: space-between; align-items: center; padding: 6px 10px; border-bottom: 1px solid #f5f5f5;';
                    item.innerHTML = `
                    <span style="font-size: 12px;">ğŸ“¹ ${name}</span>
                    <button type="button" class="btn btn-secondary" style="font-size: 10px; padding: 1px 5px; color: var(--danger);" onclick="removeAuthorized('${name}')">ç§»é™¤</button>
                `;
                    container.appendChild(item);
                });

                // Also update checkboxes in left panel
                const checkboxes = document.querySelectorAll('#inlineAvailableList input[type="checkbox"]');
                checkboxes.forEach(cb => {
                    const name = cb.nextElementSibling.textContent.replace('ğŸ“¹ ', '');
                    cb.checked = authorizedDevices.includes(name);
                });
            }

            function toggleDeviceAuth(name) {
                if (authorizedDevices.includes(name)) {
                    authorizedDevices = authorizedDevices.filter(d => d !== name);
                } else {
                    authorizedDevices.push(name);
                }
                renderAuthorizedList();
            }

            function removeAuthorized(name) {
                authorizedDevices = authorizedDevices.filter(d => d !== name);
                renderAuthorizedList();
            }

            function clearAllAuthorized() {
                authorizedDevices = [];
                renderAuthorizedList();
            }

            function toggleSelectAllInline(checkbox) {
                const visibleItems = document.querySelectorAll('#inlineAvailableList .available-device-item');

                visibleItems.forEach(item => {
                    const name = item.querySelector('span').textContent.replace('ğŸ“¹ ', '');
                    if (checkbox.checked) {
                        if (!authorizedDevices.includes(name)) authorizedDevices.push(name);
                    } else {
                        authorizedDevices = authorizedDevices.filter(d => d !== name);
                    }
                });
                renderAuthorizedList();
            }

            function filterInlineDevices() {
                const text = document.getElementById('inlineSearchInput').value;
                const area = document.getElementById('inlineAreaFilter').value;
                const status = document.getElementById('inlineStatusFilter').value;
                renderInlineSelector(text, area, status);
            }

            function submitDecision() {
                if (authorizedDevices.length === 0) {
                    showToast('è‡³å°‘éœ€è¦æˆæƒä¸€å°è®¾å¤‡', 'error');
                    return;
                }
                closeApprovalModal();
                showToast(`å®¡æ‰¹å®Œæˆï¼Œå·²æˆæƒ ${authorizedDevices.length} å°è®¾å¤‡`, 'success');
            }
        </script>
</body>

</html>